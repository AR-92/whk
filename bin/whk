#!/usr/bin/env bash

# whk - Webhook Manager
# A professional Linux CLI tool for managing webhooks

# Exit on error
set -e

# Source utility functions
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "${SCRIPT_DIR}/utils.sh"

# Main function
main() {
    # Initialize data directory
    init_data_dir
    
    # Parse command line arguments
    case "$1" in
        create)
            create_webhook
            ;;
        list)
            list_webhooks
            ;;
        delete)
            delete_webhook
            ;;
        trigger)
            trigger_webhook "$2" "$3"
            ;;
        schedule)
            schedule_webhook
            ;;
        dry-run)
            dry_run_webhook "$2" "$3"
            ;;
        help|--help|-h)
            show_help
            ;;
        "")
            show_help
            ;;
        *)
            echo "Unknown command: $1"
            show_help
            exit 1
            ;;
    esac
}

# Run main function with all arguments
main "$@"